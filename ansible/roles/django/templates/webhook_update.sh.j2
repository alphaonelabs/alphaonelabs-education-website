#!/bin/bash

# Webhook update script for {{ project_name }}
cd {{ project_path }}

# Pull latest changes
git pull origin {{ git_branch | default('main') }}

# Activate virtual environment and install requirements
source venv/bin/activate
pip install -r requirements.txt

# Run Django management commands
python manage.py migrate
python manage.py collectstatic --noinput

# Restart the application service
sudo systemctl restart {{ project_name }}

# Log the update
echo "$(date): Webhook update completed" >> {{ project_path }}/logs/webhook.log 