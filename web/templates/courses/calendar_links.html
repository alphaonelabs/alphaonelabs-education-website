{% extends "base.html" %}

{% block title %}
  Calendar Links - {{ session.title }}
{% endblock title %}
{% block content %}
  <main class="container mx-auto px-4 py-8">
    <div class="mb-4">
      <h1 class="text-3xl font-bold mb-4">Add to Calendar</h1>
      <h2 class="text-xl text-gray-600 mb-3">{{ session.course.title }} - {{ session.title }}</h2>
    </div>
    <div class="grid md:grid-cols-12 gap-4">
      <div class="md:col-span-8">
        <div class="bg-white dark:bg-gray-800 text-black dark:text-white rounded-lg shadow-md">
          <div class="p-6">
            <h2 class="text-xl font-semibold mb-4">Session Details</h2>
            <p class="mb-2">
              <strong>Date:</strong>
              <time datetime="{{ session.start_time|date:'c' }}">{{ session.start_time|date:"F j, Y" }}</time>
            </p>
            <p class="mb-2">
              <strong>Time:</strong>
              <time datetime="{{ session.start_time|date:'c' }}">{{ session.start_time|time:"g:i A" }}</time>
              -
              <time datetime="{{ session.end_time|date:'c' }}">{{ session.end_time|time:"g:i A" }}</time>
              <span class="ml-1 text-gray-500">({{ session.start_time|date:"e" }})</span>
            </p>
            {% if session.is_virtual %}
              <p class="mb-2">
                <strong>Location:</strong> Virtual (link will be provided)
              </p>
            {% elif session.location %}
              <p class="mb-2">
                <strong>Location:</strong> {{ session.location }}
              </p>
            {% endif %}
            <p>{{ session.description }}</p>
          </div>
        </div>
        <div class="bg-white dark:bg-gray-800 text-black dark:text-white rounded-lg shadow-md mt-4">
          <div class="p-6">
            <h2 class="text-xl font-semibold mb-4">Calendar Options</h2>
            <div class="space-y-2">
              <!-- Google Calendar -->
              <a href="{{ calendar_links.google }}"
                 target="_blank"
                 rel="noopener noreferrer"
                 class="block p-4 border rounded-lg hover:bg-gray-50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-600">
                <div class="flex justify-between items-center">
                  <div>
                    <p class="font-medium">Add to Google Calendar</p>
                    <p class="text-gray-500">Opens in a new window</p>
                  </div>
                  <i class="fas fa-external-link-alt text-gray-400" aria-hidden="true"></i>
                </div>
              </a>
              <!-- Outlook Calendar -->
              <a href="{{ calendar_links.outlook }}"
                 target="_blank"
                 rel="noopener noreferrer"
                 class="block p-4 border rounded-lg hover:bg-gray-50 transition-colors">
                <div class="flex justify-between items-center">
                  <div>
                    <p class="font-medium">Add to Outlook Calendar</p>
                    <p class="text-gray-500">Opens in a new window</p>
                  </div>
                  <i class="fas fa-external-link-alt text-gray-400" aria-hidden="true"></i>
                </div>
              </a>
              <!-- iCal Feed -->
              <a href="{% url 'calendar_feed' %}"
                 class="block p-4 border rounded-lg hover:bg-gray-50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-600">
                <div class="flex justify-between items-center">
                  <div>
                    <p class="font-medium">Download iCal File</p>
                    <p class="text-gray-500">Compatible with Apple Calendar, Outlook, and other calendar apps</p>
                  </div>
                  <i class="fas fa-download text-gray-400" aria-hidden="true"></i>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="md:col-span-4">
        <aside aria-labelledby="help-heading">
          <div class="bg-white dark:bg-gray-800 text-black dark:text-white rounded-lg shadow-md">
            <div class="p-6">
              <h2 id="help-heading" class="text-xl font-semibold mb-4">Need Help?</h2>
              <p class="text-gray-600 mb-4">
                Choose your preferred calendar application from the options on the left. The session will be automatically added to your calendar with all the necessary details.
              </p>
              <h6 class="font-medium mt-6 mb-3">Calendar Sync Instructions:</h6>
              <ol class="space-y-2">
                <li class="flex items-center">
                  <i class="fas fa-check text-green-500 mr-2" aria-hidden="true"></i> Click your preferred calendar option
                </li>
                <li class="flex items-center">
                  <i class="fas fa-check text-green-500 mr-2" aria-hidden="true"></i> Review the event details
                </li>
                <li class="flex items-center">
                  <i class="fas fa-check text-green-500 mr-2" aria-hidden="true"></i> Click save or add to calendar
                </li>
                <li class="flex items-center">
                  <i class="fas fa-check text-green-500 mr-2" aria-hidden="true"></i> The session is now in your calendar!
                </li>
              </ol>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>
{% endblock content %}
