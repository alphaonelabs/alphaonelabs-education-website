{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* Remove any elements that might interfere with full screen */
    header, footer, .site-header, .site-footer, .navbar {
        display: none !important;
    }
    
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100vh;
        background: #f5f5f5;
    }
    
    .container-fluid {
        padding: 0 !important;
        margin: 0 !important;
        max-width: 100% !important;
    }
    
    .ai-container {
        padding: 0 !important;
        margin: 0 !important;
        max-width: none !important;
    }
    
    .row {
        margin: 0 !important;
    }
    
    .col-12 {
        padding: 0 !important;
    }
    
    .ai-main-content {
        padding: 0 !important;
        margin: 0 !important;
        overflow: hidden;
    }
    
    /* Custom Teal Color Scheme */
    :root {
        --teal-dark: rgb(17, 94, 89);
        --teal-light: rgb(20, 110, 105);
        --teal-lighter: rgba(17, 94, 89, 0.1);
        --teal-accent: rgb(129, 230, 217);
        --text-dark: #333333;
    }
    
    /* Sidebar Styling with teal theme */
    .sidebar {
        position: fixed;
        top: 0;
        left: -280px;
        width: 280px;
        height: 100vh;
        background: var(--teal-dark);
        color: #fff;
        padding: 20px;
        transition: left 0.3s ease;
        z-index: 1050;
        box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }
    .sidebar.active {
        left: 0;
    }
    .sidebar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .close-btn {
        background: none;
        border: none;
        color: #fff;
        font-size: 26px;
        cursor: pointer;
    }
    .sidebar-menu {
        list-style: none;
        padding: 0;
    }
    .sidebar-menu li {
        margin-bottom: 15px;
    }
    .sidebar-menu li a {
        color: #fff;
        text-decoration: none;
        font-size: 1rem;
        transition: all 0.3s ease;
        display: block;
        padding: 8px 10px;
        border-radius: 4px;
    }
    .sidebar-menu li a:hover {
        background: rgba(255,255,255,0.1);
    }
    
    /* Hamburger Button Styling */
    .hamburger {
        position: fixed;
        top: 15px;
        left: 15px;
        background: var(--teal-dark);
        border: none;
        color: #fff;
        font-size: 22px;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        z-index: 1000;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="ai-container">
        <div class="row">
            <div class="col-12">
                <div class="ai-main-content">
                    {% block ai_content %}{% endblock %}
                </div>
            </div>
        </div>
    </div>
</div>

{% if not request.path == '/ai/chat/' %}
<!-- Only show sidebar and hamburger on non-chat pages -->
<!-- Hamburger Button to Open Sidebar -->
<button id="openSidebar" class="hamburger">
  <i class="fas fa-bars"></i>
</button>

<!-- Sidebar Navigation -->
<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h4>Navigation</h4>
    <button id="closeSidebar" class="close-btn">&times;</button>
  </div>
  <ul class="sidebar-menu">
    <li><a href="/ai/chat/">Chat Assistant</a></li>
    <li><a href="/ai/dashboard/">Dashboard</a></li>
    <li><a href="/ai/progress/">Progress</a></li>
    <li><a href="/ai/settings/">Settings</a></li>
    <li><a href="/">Home</a></li>
  </ul>
</div>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

// Setup sidebar functionality for all non-chat pages
document.addEventListener('DOMContentLoaded', function() {
    const openSidebar = document.getElementById('openSidebar');
    const sidebar = document.getElementById('sidebar');
    const closeSidebar = document.getElementById('closeSidebar');
    
    if (openSidebar && sidebar && closeSidebar) {
        // Sidebar toggling
        openSidebar.addEventListener('click', function(e) {
            e.stopPropagation();
            sidebar.classList.add('active');
        });
        
        closeSidebar.addEventListener('click', function() {
            sidebar.classList.remove('active');
        });
        
        sidebar.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        document.addEventListener('click', function() {
            sidebar.classList.remove('active');
        });
    }
});
</script>
{% block ai_extra_js %}{% endblock %}
{% endblock %}
